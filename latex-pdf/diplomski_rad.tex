\documentclass[times, utf8, diplomskirad]{fer}
% Dodaj opciju upload za generiranje konačne verzije koja se učitava na FERWeb
% Add the option upload to generate the final version which is uploaded to FERWeb

\usepackage{booktabs}
\usepackage{float}
\usepackage[bottom]{footmisc}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{pythonhighlight}
\usepackage{blindtext}
\usepackage{bm}

%--- PODACI O RADU / THESIS INFORMATION ----------------------------------------

% Naslov na engleskom jeziku / Title in English
\title{Visual state representation of robot manipulator}

% Naslov na hrvatskom jeziku / Title in Croatian
\naslov{Vizualna reprezentacija stanja robotskog manipulatora}

% Broj rada / Thesis number
\brojrada{476}

% Autor / Author
\author{Sven Šćekić}

% Mentor 
\mentor{Prof.\@ Marija Seder}

% Datum rada na engleskom jeziku / Date in English
\date{June, 2024}

% Datum rada na hrvatskom jeziku / Date in Croatian
\datum{lipanj, 2024.}

%-------------------------------------------------------------------------------


\begin{document}


% Naslovnica se automatski generira / Titlepage is automatically generated
\maketitle


%--- ZADATAK / THESIS ASSIGNMENT -----------------------------------------------

% Zadatak se ubacuje iz vanjske datoteke / Thesis assignment is included from external file
% Upiši ime PDF datoteke preuzete s FERWeb-a / Enter the filename of the PDF downloaded from FERWeb
\zadatak{diplomski-zadatak.pdf}


%--- ZAHVALE / ACKNOWLEDGMENT --------------------------------------------------

\begin{zahvale}
  % Ovdje upišite zahvale / Write in the acknowledgment
    mojoj prekrasnoj curi s velikim dupetom i juicy bodyodyodyem. nju jedinu volim. <333333 8===========D ona mi je sve i kupit cu joj prsten 2024
\end{zahvale}


% Odovud započinje numeriranje stranica / Page numbering starts from here
\mainmatter
\pagenumbering{roman}


% Sadržaj se automatski generira / Table of contents is automatically generated
\tableofcontents

\setcounter{page}{1}
\mainmatter

%--- UVOD / INTRODUCTION -------------------------------------------------------
\chapter{Uvod}
\label{pog:uvod}
\hspace{\parindent}Robotika i automatika u današnjem svijetu dobivaju sve više pozornosti zbog svojih brojnih mogućnosti koje pružaju.
Neke od najvećih industrija čiji je rast značajno potpomognut razvojem robotike su automobilska i zdravstvena industrija.
Zbog primjene u takvim industrijama zahtjeva se poznavanje točne konfiguracije robota sa svim potrebnim parametrima kako
bi se zadane radnje koje bi roboti trebali izvoditi izvele točno onako kako je očekivano.
Ovo je posebice bitno u zdravstvenoj industriji gdje male razlike u parametrima mogu rezultirati ozbiljnim posljedicama.

U ovom diplomskom radu pobliže ćemo objasniti što sve čini konfiguraciju robota te kako se ona zapisuje u standardnom obliku.
Objasnit ćemo što su direktna i inverzna kinematika te kako se koriste prilikom prikaza različitih stanja robota.
Nadalje ćemo prikazati različite metode za generiranje 2D slika pomoću 3D modela robota i njegovih konfiguracija.
Na kraju ćemo prikazati suprotan proces, odnosno kako možemo iskoristit duboke modele kako bi iz njih naučili 3D model robota.
Tijekom cijelog rada ove metode primjenjivat ćemo na Franka Emika Panda robotskom manipulatoru, ali naravno one su primjenjive i na bilo kojem drugom.

%-------------------------------------------------------------------------------
\chapter{Kinematika robota}
Kinematika je, uz statiku i dinamiku, jedna od tri osnovne grane mehanike.
Kinematika opisuje kretanje tijela ne uzimajući u obzir sile koje uzrokuju kretanje.
Statika proučava tijela u ravnoteži, odnosno sile koje održavaju tijelo ravnotežnom položaju, dok dinamika proučava kretanje objekata prilikom djelovanja različitih sila.

Kada pri kretanju tijela iz analize uklonimo sve popratne sile tada je njegovo gibanje određeno funkcijom kutova između njegovih dijelova.
Kroz ovaj rad ćemo promatrati kinematiku u kontekstu robotskog manipulatora te kako je njegovo gibanje određeno ponašanjem njegovih zglobova i članaka.

\section{Robotski manipulator}
Robotski manipulator je specijalizirana vrsta robota dizajniran za obavljanje određenih zadataka.
Koristi se u različitim industrijama zbog svojih mogućnosti da precizno obavlja zadane radnje.
Sastoji se od zglobova (eng. \textit{joints}) koji svojom rotacijom ili pomicanjem u prostoru omogućuju da manipulator postigne zadano stanje.
Zglobovi su međusobno povezani člancima (eng. \textit{links}) koji imaju svoju određenu duljinu.

Na samom vrhu robotskog manipulatora nalazi se izvršni element (eng. \textit{end effector}) koji služi za interakciju sa stvarnim svijetom.
Upravo je taj dio zadužen za obavljanje zadanih radnji.
Na slici \ref{fig:panda-zglob} možemo vidjeti pirmjere zglobova i članaka na Panda robotskom manipulatoru kojeg ćemo promatrati tijekom ovog rada.
\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/panda-links-and-joints}
    \caption{Zglobovi i članci na Frank Emika Panda manipulatoru\protect\footnotemark}
    \label{fig:panda-zglob}
\end{figure}
\footnotetext{Preuzeto sa \url{ https://www.researchgate.net/ }}

\subsection{Konfiguracija manipulatora}
Konfiguraciju manipulatora čini potpuno određen položaj svih njegovih točaka.
Skup svih mogućih konfiguracija čini konfiguracijski prostor manipulatora.
Pojedinu konfiguraciju tada možemo promatrati kao točku unutar konfiguracijskog prostora.

Kao i svaki prostor i konfiguracijski prostor ima svoju dimenziju i oblik.
Dimenzija je određena brojem realnih koordinata potrebnih za potpunu reprezentaciju konfiguracije, što još nazivamo i stupnjevi slobode.
Oblik konfiguracijskog prostora je također jako bitan s obzirom da on određuje moguće prepreke i ograničenja unutar samog prostora što smanjuje broj mogućih konfiguracija.
U nastavku ćemo pobliže objasniti što sve utječe na broj stupnjeva slobode manipulatora te kakve sve oblike konfiguracijskog prostora možemo susresti.

\hfill
\subsection{Vrste zglobova i stupnjevi slobode}
Zglobovi i članci zajedno omogućuju da manipulator postigne željena stanja.
Skup svih stanja koje manipulator može dosegnuti u prostoru nazivamo radni prostor robota (eng. \textit{workspace}).
Ono što najviše određuje radni prostor jesu vrste zglobova od kojih se naš manipulator sastoji.

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/robot-joints}
    \caption{Vrste zglobova}
    \label{fig:robot-joints}
\end{figure}
\footnotetext{Preuzeto sa \url{ https://hades.mech.northwestern.edu/images/2/25/MR-v2.pdf }}
Na slici \ref{fig:robot-joints} možemo vidjeti različite vrste zglobova koje se koriste.
Svaki od ovih zglobova sastoji se od određenog broja stupnjeva slobode.
Stupnjeve slobode čini broj nezavisnih varijabli koje određuju kretanje nekog tijela.
Kruta tijela u prostoru obično sadrže šest stupnjeva slobode.
Tri stupnja slobode za translaciju, odnosno rotaciju, po svakoj od triju koordinatnih osi.

Kod robotskih manipulatora stupnjeve slbode definiramo na razini zglobova ili manipulatora u cijelosti.
Tako revolucijski zglob sadrži jedan stupanj slobode, odnosno rotaciju oko jedne osi, dok sferični zglob sadrži 3 stupnja slobode te funkcijom podjseća na ljudski rameni zglob.
Ako želimo izraziti broj stupnjeva slobode za manipulator u cijelosti tada se možemo poslužiti Grüblerovom formulom koju možemo vidjeti u formuli (\ref{eq:grubler}).

\begin{equation}
    \begin{aligned}
        \text { dof } &=\underbrace{m(N-1)}_{\text {rigid body freedoms }}-\underbrace{\sum_{i=1}^{J} c_{i}}_{\text {joint constraints }} \\
        &=m(N-1)-\sum_{i=1}^{J}\left(m-f_{i}\right) \\
        &=m(N-1-J)+\sum_{i=1}^{J} f_{i} \cdot
    \end{aligned}
    \label{eq:grubler}
\end{equation}

Varijabla \textit{m} predstavlja konstantu, koja iznosi 3 za planarne manipulatore, odnosno 6 za prostorne manipulatore.
Varijabla \textit{N} predstavlja broj članaka, dok varijabla \textit{J} predstavlja broj zglobova.
Konačno, varijabla \textit{f\textsubscript{i}} predstavlja broj stupnjeva slobode pojedinog zgloba.

\subsection{Oblik konfiguracijskog prostora}
Uz dimenziju konfiguracijskog prostora bitan je i njegov oblik.
Oblik prostora definiran je svojom topologijom, odnosno numeričkom reprezentacijom.

Toplogiju možemo definirati kao skup sličnih oblika prostora, odnosno smatramo da su dva prostora topološki jednaka
ako se jedan prostor može dobiti iz drugog bez "\textit{ljepljenja}" i "\textit{rezanja}"~\cite{10.5555/3165183}.
Tako možemo reći kako su sfera i elipsoid topološki jednaki, dok ravnina i kugla nisu.

Oblik prostora prikazujemo putem njegove numeričke reprezentacije.
Tako točku unutar ravnine predstavljamo s vektorom od dvije dimenzije, dok točku u prostoru predstavljamo s vektorom od tri dimenzije.
Ukoliko je naš prostor sfernog oblika tada točku na sferi možemo prikazati preko dvije veličine kuteva.
Različite numeričke reprezentacije i topologije možemo vidjeti na slici \ref{fig:configuration-topology}

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/configuration-topology}
    \caption{Konfiguracijski prostori njihova topologija i numerička reprezentacija}
    \label{fig:configuration-topology}
\end{figure}

\section{Kinematika krutog tijela} \label{section:kin-krutog-tijela}
Kruto tijelo ćemo definirati kao idealni sustav točaka koje održavaju iste međusobne razmake~\cite{defKrutogTijela}.
Ranije smo spomenuli kako za potpuno određivanje konfiguracije manipulatora u prostoru moramo znati položaj njegovih točaka.
Da bismo poznavali položaj tih točaka potrebno je definirati u kojem koordinatnog sustavu ih promatramo.
Postoje tri osnovne vrste koordinatnih sustava:
\begin{itemize}
  \item Linijski ili jednodimenzionalni sustavi
  \item Planarni ili dvodimenzionalni sustavi
  \item Prostorni ili trodimenzionalni sustavi
\end{itemize}
\newpage
Zbog toga što u ovom radu promatramo pojmove u konteksu robotskog manipulatora mi ćemo se fokusirati na trodimenzionalni sustav.
Nakon što smo odredili dimenzije našeg koordinatnog sustava potrebno je odrediti koje je njegovo središte.

Koordinatni sustav možemo predstaviti preko prostora unutar kojeg naš mainpulator djeluje što onda nazivamo prostorni oblik (engl. \textit{Space frame}).
Drugi pristup koji možemo koristiti je da predstavimo koordinatni sustav preko neke fiksne točke na našem krutom tijelu što onda nazivamo \textit{tjelesni} oblik (engl. \textit{Body frame}).
U kontekstu našeg manipulatora ta točka bi mogla biti njegova baza ili točka na izvršnom elementu.

U praksi ćemo ipak uvijek htjeti promatrati naš manipulator kroz koordinatni sustav prostora, no onda bismo trebali biti upoznati kako pretvaramo koordinatni sustav našeg manipulatora u prostorni koordinatni sustav.
Za takvu pretvorbu služe nam rotacijske i translacijskse matrice.
Ovo će nam koristiti i u nastavku kod izvoda formule direktne kinematike koju ćemo tada moći jednostavnije i jasnije izvesti.

\subsection{Translacija i rotacija u prostoru}
Translacija je transformacija u prostoru koja svakoj komponenti točke dodaje određeni pomak.
Tako je koordinatni sustav manipulatora translatiran u prostoru u odnosu na prostorni koordinatni sustav.
Matricu translacije u prostornom koordinatnom sustavu u svom općem obliku možemo vidjeti pod (\ref{eq:translacijska-matrica})

\begin{equation}
\boldsymbol{\Psi}_{t r}=\left[
    \begin{array}{cccc}
        1 & 0 & 0 & 0 \\
        0 & 1 & 0 & 0 \\
        0 & 0 & 1 & 0 \\
        \Delta_x & \Delta_y & \Delta_z & 1
    \end{array}
    \right]
    \label{eq:translacijska-matrica}
\end{equation}

Možemo vidjeti kako je ova matrica veličine 4x4, pa možemo postaviti validno pitanje kako ćemo našu trodimenzionalnu točku pomoću ove matrice translatirati u prostoru.
Zato ćemo za računanje s ovakvim oblikom translacijske matrice upotrijebiti homogene koordinate koje ćemo definirati u poopćenom n-dimenzionalnom prostoru~\cite{book:irg}.

\noindent~Ukoliko imamo n-dimenzionalnu točku koja je zadana kao:
\begin{align*}
    \bm T_P=\left(T_{P_1}, T_{P_2}, \ldots, T_{P_n}\right)
\end{align*}
Tada njena homogena reprezentacija ima oblik:
\begin{align*}
    \bm T_{Ph}=\left(T_{Ph_1}, T_{Ph_2}, \ldots, T_{Ph_n}, h\right)
\end{align*}
Gdje definiramo veličinu \textit{h} kao:
\begin{align*}
    \bm T_{P_i}=\frac{T_{P h_i}}{h} \text {, odnosno } T_{P h_i}=T_{P_i} \cdot h \text {. }
\end{align*}
Tako naša 3-dimenzionalna točka postaje 4-dimenzionalna te translaciju dobivamo kao umnožak homogene točke i translacijske matrice:

\begin{equation}
\bold T_{t r}=
\left[
    \begin{array}{cccc}
        x & y & z & 1 \\
    \end{array}
    \right]
\left[
    \begin{array}{cccc}
        1 & 0 & 0 & 0 \\
        0 & 1 & 0 & 0 \\
        0 & 0 & 1 & 0 \\
        \Delta_x & \Delta_y & \Delta_z & 1
    \end{array}
    \right]
    \label{eq:translacijska-matrica-full}
\end{equation}


Inverz ove operacije translacije iz (\ref{eq:translacijska-matrica}) možemo vidjeti pod (\ref{eq:translacijska-matrica-inverz}).
Trivijalno proizlazi da je inverz pomak u negativnom smjeru od onog početnog.
\begin{equation}
    \boldsymbol{\Psi}_{t r}=\left[
        \begin{array}{cccc}
            1 & 0 & 0 & 0 \\
            0 & 1 & 0 & 0 \\
            0 & 0 & 1 & 0 \\
            -\Delta_x & -\Delta_y & -\Delta_z & 1
        \end{array}
        \right]
    \label{eq:translacijska-matrica-inverz}
\end{equation}

\newpage
Rotacija je prostorna transformacija koja točku rotira oko ishodišta za određeni kut $\theta$~\cite{book:irg}.
Pozitivnim smjerom rotacije smatrat ćemo smjer obrnut od kazaljke na satu.
Za rotaciju u prostoru razlikujemo tri moguće rotacije.

Pozitivnu rotaciju oko osi \textit{x}, \textit{y} i \textit{z} u općenitom obliku definiramo pomoću sljedećih rotacijskih matrica:

\begin{equation}
    \boldsymbol{\Psi}_{\text {rotx }}=\left[\begin{array}{cccc}
    1 & 0 & 0 & 0 \\
    0 & \cos (\alpha) & \sin (\alpha) & 0 \\
    0 & -\sin (\alpha) & \cos (\alpha) & 0 \\
    0 & 0 & 0 & 1
    \end{array}\right]
    \label{eq:rotacija-x-matrica}
\end{equation}

\begin{equation}
    \boldsymbol{\Psi}_{\text {roty }}=\left[\begin{array}{cccc}
        \cos (\beta) & 0 & -\sin (\beta) & 0 \\
        0 & 1 & 0 & 0 \\
        \sin (\beta) & 0 & \cos (\beta) & 0 \\
        0 & 0 & 0 & 1
    \end{array}\right]
    \label{eq:rotacija-y-matrica}
\end{equation}

\begin{equation}
    \boldsymbol{\Psi}_{\text {rotz }}=\left[\begin{array}{cccc}
    \cos (\gamma) & \sin (\gamma) & 0 & 0 \\
    -\sin (\gamma) & \cos (\gamma) & 0 & 0 \\
    0 & 0 & 1 & 0 \\
    0 & 0 & 0 & 1
    \end{array}\right]
    \label{eq:rotacija-z-matrica}
\end{equation}
\hfill

Ovakav općeniti oblik rotacijskih i translacijskih matrica nam nije previše pogodan za računanje.
Htjeli bismo pomoću jedne matrice odrediti položaj i orjentaciju manipulatora u prostornom koordinatnom sustavu.
Zbog toga uvodimo homogene tranformacijske matrice
\newpage
\subsection{Homogene transformacijske matrice}
Homogene transformacijske matrice definirat ćemo preko Euklidske \textit{SE(3)} grupe.
Euklidsku grupu čine sve transformacije, poput rotacije ili translacije, koje čuvaju udaljenost između točaka u prostoru.
Našu \textit{SE(3)} grupu definirat ćemo kao sve 4 x 4 realne matrice sljedećeg oblika~\cite{10.5555/3165183}:

\begin{equation}
    T=\left[\begin{array}{cc}
    R & p \\
    0 & 1
    \end{array}\right]=\left[\begin{array}{cccc}
    r_{11} & r_{12} & r_{13} & p_1 \\
    r_{21} & r_{22} & r_{23} & p_2 \\
    r_{31} & r_{32} & r_{33} & p_3 \\
    0 & 0 & 0 & 1
    \end{array}\right]
    \label{eq:transformacijska matrica}
\end{equation}

Ove matrice imaju i neka zanimljiva svojstva.
Jedno od njih je da je inverz transformacijske matrice također transformacijska matrica te ima oblik definiran u (\ref{eq:inverz-transformacijske}).
Ovo svojstvo nam može biti korisno kada želimo neku točku prikazati unutar koordinatnog sustava manipulatora a znamo njenu prostornu reprezentaciju.
\begin{equation}
    T^{-1}=\left[\begin{array}{cc}
    R & p \\
    0 & 1
    \end{array}\right]^{-1}=\left[\begin{array}{cc}
    R^{\mathrm{T}} & -R^{\mathrm{T}} p \\
    0 & 1
    \end{array}\right]
\label{eq:inverz-transformacijske}
\end{equation}

Drugo svojstvo je da je umnožak dvije transformacijske matrice također transformacijska matrica.
Ovo svojstvo će nam biti korisno kod izračuna direktne kinematike.
Množenje transformacijskih matrica je također asocijativna operacija, ali nije komutativna.
Zbog svih svojih svojstava homogene transformacijske matrice koriste se za:
\begin{itemize}
    \item Reprezentaciju položaja i orjentacije krutog tijela u prostoru
    \item Transformaciju točke ili vektora iz jednog koordinatnog sustava u drugi
    \item Pomicanje vektora ili koordinatnog sustava
\end{itemize}

\newpage
\section{Direktna kinematika}
Direktna kinematika služi za izračun položaja i orjentacije izvršnog elementa uz poznati iznos kutova pojedinog zgloba manipulatora.
Veoma je bitna zbog toga što upravo tim izračunom možemo saznati konfiguraciju izvršnog elementa manipulatora kako bismo izvršili neku nama korisnu radnju.
Direktnu kinematiku možemo računati u koordinatnom sustavu robota ili u prostornom koordinatnom sustavu.
Mi ćemo se u nastavku fokusirati samo na prostorni oblik pošto nam je on korisniji kod upravljanja manipulatorom u stvarnom svijetu, pogotovo ako su pristune neke prepreke unutar prostora.

U formuli direktne kinematike koristit ćemo transformacijske matrice za transformaciju položaja i orjentacije između koordinatnih sustava svakog pojedinog zgloba.
Tako ćemo kod Panda robota, kojeg smo promatrali, za izračun direktne kinematike imati sedam transformacijskih matrica za susjedne zglobove te još dvije transformacijske matrice za dio kod izvršnog elementa.
Formula za izračun direktne kinematike tada će biti definirana u formuli (\ref{eq:equation-direktna-kinematika}):
\begin{equation}
T_{07}=T_{01} T_{12} T_{23} T_{34} T_{45} T_{56} T_{67} T_{F} T_{EE}
    \label{eq:equation-direktna-kinematika}
\end{equation}

Sada nam preostaje odrediti pojedinačne transformacijske matrice za susjedne zglobove.
Ovo možemo odrediti pomoću dva pristupa.
Prvi pristup koristi PoE formulu, dok se drugi pristup oslanja na DH (Denavit-Hartenberg) parametre.
\subsection{PoE formula}
Za izračun putem ovog pristupa potrebne su nam sljedeće varijable:
\begin{itemize}
    \item Matrica \textit{M} koja predstavlja položaj i orjentaciju izvršnog elementa kada je manipulator u početnom stanju, odnosno kada su svi kutovi zglobova jednaki 0
    \item Matrice \textit{$S_1, ..., S_7$} koje odgovaraju translaciji i rotaciji u odnosu na središte prostornog koordinatnog sustava kada je manipulator u početnom stanju te rotira oko zgloba
    \item Konfiguracija kuteva \textit{$\theta_1, ..., \theta_7$} koje predstavljaju zaokret pojedinog zgloba
\end{itemize}
\newpage
Radi lakšeg računanja matrica \textit{M} te sve matrice \textit{S} zapisane su u svom \textit{SE(3)} obliku.
Tako matrica S inicijalno izgleda kao stupac vektor što možemo vidjeti u (\ref{eq:s-matrica-stupac}).
Prve 3 veličine predstavljaju translaciju u prostornom koordinatnom sustavu, dok zadnje 3 veličine predstavljaju rotaciju.

\begin{equation}
    \mathcal{S}_i=\left[\begin{array}{c}
    \omega \\
    v
    \end{array}\right]=\left[\begin{array}{c}
    \omega_1 \\
    \omega_2 \\
    \omega_3 \\
    v_1 \\
    v_2 \\
    v_3
    \end{array}\right]
    \label{eq:s-matrica-stupac}
\end{equation}

Želimo li matricu \textit{$S_i$} izraziti preko standardne \textit{SE(3)} reprezentacije tada dobivamo matricu u (\ref{eq:s-matrica-se3})

\begin{equation}
    \left[S_3\right]=\left[\begin{array}{cc}
    [\omega] & v \\
    0 & 0
\end{array}\right]=
    \left[\begin{array}{cccc}
        w_{11} & w_{12} & w_{13} & v_1 \\
        w_{21} & w_{22} & w_{23} & v_2 \\
        w_{31} & w_{32} & w_{33} & v_3 \\
        0 & 0 & 0 & 1
    \end{array}\right]
    \label{eq:s-matrica-se3}
\end{equation}

Koristeći matrice \textit{$S_i$} i matricu \textit{M} zamjenjujemo homogene transformacijske matrice njihovom eksponencijalnom reprezentacijom.
Tako će homogena transformacijska matrica za zglob \textit{i} biti definirana preko svoje eksponencijalne reprezentacije koju možemo vidjeti u (\ref{eq:eksponencijalna-reprezentacija})

\begin{equation}
     T_{0i}=e^{\left[\mathcal{S}_{1}\right] \theta_{1}}  e^{\left[\mathcal{S}_{2}\right] \theta_{2}} , ..., e^{\left[\mathcal{S}_{i-1}\right] \theta_{i-1}} e^{\left[\mathcal{S}_{i}\right] \theta_{i}} M
    \label{eq:eksponencijalna-reprezentacija}
\end{equation}
\newpage
\subsection{DH parametri}
DH, odnosno Denavit-Hartenberg parametri, predstavljaju drugačiji način definiranja parametara za pojedini zglob manipulatora.
U formuli (\ref{eq:s-matrica-stupac}) možemo vidjeti kako za potpunu definiciju matrice \textit{S} pojedinog zgloba moramo poznavati šest parametara, odnosno tri za translaciju te tri za rotaciju.
Nasuprot tome, DH parametri zahtjevaju samo četiri varijable za pojedini zglob manipulatora.
\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/dh-parametri}
    \caption{Ilustracija DH parametara revolucijskog i prizmatičnog zgloba}
    \label{fig:dh-parametri}
\end{figure}

\noindent Varijable koje definiraju su možemo vidjeti na slici \ref{fig:dh-parametri}, a predstavljaju sljedeće:
\begin{enumerate}
    \item duljina članka \textit{$a_i$} predstavlja udaljenost između osi rotacije susjednih zglobova te ne mora nužno odgovarati duljini stvarnog članka
    \item zaokret članka \textit{$\alpha_i$} predstavlja kut između z osi susjednog članka \textit{$z_{i-1}$} i
    \item pomak članka \textit{$d_i$} je udaljenost između \textit{$x_{i-1}$} i \textit{$z_{i}$}
    \item kut zgloba \textit{$\theta_i$} je kut između \textit{$x_{i-1}$} i \textit{$x_{i}$} u odnosu na os \textit{$z_{i}$}
\end{enumerate}
Kako bi korisnicima svojih manipulatora olakšali upravljanje, proizvođači obično objave DH parametre za svaki pojedini zglob.
Tako su nam te vrijednosti poznate i za naš promatrani Panda manipulator te ih možemo vidjeti u tablici \ref{tab:dh_parameters}
\renewcommand{\arraystretch}{2}
\begin{table}[H]
\centering
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Zglob} & \textbf{$a_i$ (m)} & \textbf{$d_i$ (m)} & \textbf{$\alpha_i$ (rad)} & \textbf{\(\theta\) (rad)} \\
\hline
Zglob 1 & 0 & 0.333 & 0 & \(\theta_1\) \\
\hline
Zglob 2 & 0 & 0 & \(-\frac{\pi}{2}\) & \(\theta_2\) \\
\hline
Zglob 3 & 0 & 0.316 & \(\frac{\pi}{2}\) & \(\theta_3\) \\
\hline
Zglob 4 & 0.0825 & 0 & \(\frac{\pi}{2}\) & \(\theta_4\) \\
\hline
Zglob 5 & -0.0825 & 0.384 & \(-\frac{\pi}{2}\) & \(\theta_5\) \\
\hline
Zglob 6 & 0 & 0 & \(\frac{\pi}{2}\) & \(\theta_6\) \\
\hline
Zglob 7 & 0.088 & 0 & \(\frac{\pi}{2}\) & \(\theta_7\) \\
\hline
Prirubnica & 0 & 0.107 & 0 & 0 \\
\hline
Izvršni element & 0 & 0.1034 & 0 & \(\frac{\pi}{4}\) \\
\hline
\end{tabular}
\caption{DH parametri Panda manipulatora}
\label{tab:dh_parameters}
\end{table}
Nakon što su nam poznati DH parametri našeg promatranog manipulatora spremni smo izvesti homogene transformacijske matrice potrebne formulu definiranu pod (\ref{eq:equation-direktna-kinematika}).
Općeniti oblik transformacijske matrice iz DH parametara definiran je u (\ref{eq:transformation-matrix-dh}):
\renewcommand{\arraystretch}{1}
\begin{equation}
T_i=\left[\begin{array}{cccc}
c_{\theta_i} & -s_{\theta_i} c_{\alpha_i} & s_{\theta_i} s_{\alpha_i} & a_i c_{\theta_i} \\
s_{\theta_i} & c_{\theta_i} c_{\alpha_i} & -c_{\theta_i} s_{\alpha_i} & a_i s_{\theta_i} \\
0 & s_{\alpha_i} & c_{\alpha_i} & d_i \\
0 & 0 & 0 & 1
\end{array}\right]
    \label{eq:transformation-matrix-dh}
\end{equation}

\newpage
\section{Inverzna kinematika}
Inverzna kinematika problem je kod kojeg želimo saznati potrebne kuteve zglobova manipulatora ukoliko nam je poznat željeni položaj i orjentacija izvršnog elementa.
Ovaj problem je veoma bitan jer nam omogućuje da manipulator obavlja nama koristan posao.
Definiramo željenu poziciju i orjentaciju izvršnog elementa u prostoru te izračunom inverzne kinematike postavljamo manipulator u potrebnu konfiguraciju.
Problem inverzne kinematike obično sadrži više mogućih konfiguracija manipulatora što nam pomaže u slučajevima kada se u radnom prostoru robota nalaze prepreke te pojedine konfiguracije nisu moguće uz navedena ograničenja.

Pri rješavanju ovog problema možemo koristiti jedan od dva moguća pristupa, a to su analitički te numerički pristup.
Mi smo u svojoj programskoj implementaciji koristili analitički pristup.

\subsection{Analitčka inverzna kinematika}
Analitički pristup rješavanju problema inverzne kinematike predstavlja izvod rješenja putem analitičke geometrije.
Promatranjem međusobnih odnosa zglobova i članaka izvodimo konačno rješenje.

Naravno zbog same prirode pristupa, svaki manipulator zahtjeva zasebni analitički pristup te ne postoji jedinstveni pristup.
Ovaj proces može biti veoma kompleksan, no velika prednost je njegova brzina.
Još jedna prednost je mogućnost dobivanja svih mogućih rješenja što kod numeričkih metoda možda neće biti slučaj.
Primjer analize jednog od zglobova Panda robota možemo vidjeti na slici \ref{fig:inv-kin-panda-joint-3}

U ovom radu koristili smo upravo ovaj pristup pošto su nas zanimale sve moguće konfiguracije robota za pojedine poze izvršnog elementa.
Također zbog potrebe da generiramo veliki broj konfiguracija bila nam je bitna i brzina rješavanja problema te bi nam za numeričku metodu bilo potrebno više vremena i računalne snage.
\begin{figure}[H]
    \centering
    \includegraphics[width=10cm]{img/inverse-kinematics-panda-joint-3}
    \caption{Izračun kuta trećeg zgloba Panda robota}
    \label{fig:inv-kin-panda-joint-3}
\end{figure}
\footnotetext{Preuzeto sa \cite{9646185}}

\subsection{Numerička inverzna kinematika}
Numerički pristup rješavanju problema inverzne kinematike koristi razne numeričke metode za pronalaženje rješenja.
U mnogo slučajeva nećemo imati razvijeno analitčko rješenje te je zato potrebno koristit ovaj pristup.
Ovaj problem možemo postaviti kao rješavanje problema pronalaska nultočki nelinearne funkcije.
Jedna od veoma često korištenih metoda je Newton-Raphsonova metoda.

Ovom metodom pronalazimo nasumičan broj rješenja ovisno o težini traženog problema.
Obično prilikom definiranja problema postavljamo i određeni prag greške koji je potrebno zadovoljiti.
To nam daje mogućnost da ovisno o željenom ishodu dobijemo manje, odnosno više, točna rješenja.
Važno je napomenuti da numeričke metode ponekad neće uspjeti pronaći zadovoljavajuće rješenje te je zato potrebno i ograničiti vrijeme traženja problema.
%-------------------------------------------------------------------------------


\chapter{Poligoni, kamera i slika}
\label{pog:kamera-i-slika}
U nastavku ćemo pobliže objasniti proces nastanja dvodimenzionalnih (2D) slika, odnosno kako naše trodimenzionalne (3D) objekte prikazujemo na 2D slici.
Generiranje slike je veoma složen postupak koji zahtjeva puno različitih matematičkih operacija.
Prvo ćemo opisati kako naše 3D objekte predstavljamo putem poligona te ćemo nakon toga objasniti grafički protočni sustav.

\section{Poligoni i \textit{mesh} datoteke}
Prvi korak u generiranju slike nekog 3D objekta je njegov prikaz na računalu.
Cilj nam je nad reprezentacijom tog objekta izvršavati razne matematičke operacije i geometrijske transformacije.
Zbog toga nam je korisno da naš objekt bude u obliku pogodnom za računanje, ali također želimo i sačuvati sve informacije o njegovom obliku kako ga ne bismo krivo prikazali.
Upravo zato ćemo za opis ploha koje omeđuju naš objekt koristiti poligone, odnosno trokute radi što jednostavnije reprezentacije.
Primjer kako broj poligona utječe na oblik objekta kojeg želimo prikazati možemo vidjeti na slici \ref{fig:polygons}

Za opis našeg manipulatora koristili smo \textit{mesh} datoteke.
Ove datoteke opisuju naš manipulator preko njegovih vrhova, bridova te ploha koje su, kao što je ranije spomenuto, opisane trokutima.
Postoje dvije glavne vrste mesh datoteka, a to su kolizijske (engl. \textit{collision}) i vizualne (engl. \textit{visual}).

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/polygons}
    \caption{Poligoni kod reprezentacije 3D objekata}
    \label{fig:polygons}
\end{figure}
\footnotetext{Preuzeto sa \url{https://cgifurniture.com/what-are-polygons-in-3d-modeling}}

Kolizijske \textit{mesh} datoteke primarno se koriste kod fizičkih simulacija i detekcije sudara.
Prednost ovog načina prikaza je primarno njegova jednostavnost.
Objekt se ne prikazuje potpuno detaljno, ali je i dalje ispravno prikazan oblikom i volumenom.
Ovaj način zbog svoje jednostavnosti također zahtjeva manje računalne snage te je pogodan ukoliko želimo određeni posao odraditi brže i efikasnije.

Vizualne \textit{mesh} datoteke koriste se kod detaljnog prikaza objekta.
Upravo ovaj tip \textit{mesh} datoteke smo koristili prilikom generiranja slika našeg manipulatora.
Prednosti ovog prikaza su detaljniji prikaz ploha koje uključuju i teksture te boje kako bi potpuno ispravno prikazali objekt.
Naravno, zbog detaljnijeg prikaza, datoteke su veće veličine.

Na slici \ref{fig:panda-3d-model} vidimo primjer 3D modela Panda robota koji koristi vizualne \textit{mesh} datoteke.
Možemo vidjeti kako je model veoma detaljan te sadrži i teksture na plohama.

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/panda-3d-model}
    \caption{3D model Panda robota}
    \label{fig:panda-3d-model}
\end{figure}
\footnotetext{Preuzeto sa \url{https://www.researchgate.net/figure/A-Panda-manipulator-from-Franka-Emika-visualized-on-a-macOS-laptop-The-3D-models-were_fig1_343986452}}

\section{Grafički protočni sustav}
Proces nastajanja slike opisan je kao grafički protočni sustav kojeg možemo vidjeti na slici \ref{fig:graficki-sustav}
Sastoji se od tri glavna dijela a to su:
\begin{enumerate}
    \item geometrijski sustav za izdvajanje vrhova objekta te izračun osvjetljenja
    \item rasterski sustav koji služi za rasterizaciju poligona i bridova
    \item prikazni sustav za prilagodbu prikaza rasterzirane slike
\end{enumerate}
U nastavku ćemo pobliže opisati svaki od navedenih koraka.
\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/graficki-protocni-sustav}
    \caption{Grafički protočni sustav}
    \label{fig:graficki-sustav}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

\subsection{Geometrijski sustav}
Geometrijski sustav služi za prepoznavanje vrhova te izračunavanje osvijetljenja objekta (engl. \textit{Transform and Lighting}).
Još jedna zadaća ovog sustava je transformacija pogleda u koordinatni sustav kamere.
Kao što smo ranije spomenuli u poglavlju \ref{section:kin-krutog-tijela} svaki objekt u 3D prostoru ima položaj i orjentaciju unutar vlastitog koordinatnog sustava te unutar prostornog koordinatnog sustava.

Geometrijski sustav tada transformira koordinate objekta iz prostornog koordinatnog sustava u koordinatni sustav kamere.
Naravno naš koordinatni sustav zadan je u tri dimenzije dok je naša slika dvodimenzionalna.
Tada je potrebno odrediti koordinate u 2D koordinate objekta iz njegovih 3D koordinata što nazivamo projekcija.

\newpage
\subsubsection{Projekcija}
Projekciju čine sve metode koje preslikavaju točke 3D prostora u 2D prostor.
Postoje dvije glavne vrste projekcija, a to su:
\begin{itemize}
    \item paralelna projekcija
    \item perspektivna projekcija
\end{itemize}

Paralelna projekcija je jednostavnija metoda preslikavanja.
Kao što i sam naziv govori, projektori, odnosno pravci pomoću kojih radimo projekciju, su međusobno paralelni.
Projektori mogu biti okomiti na ravninu projekcije pa takvu vrstu paralelne projekcije nazivamo ortografska projekcija.
Ukoliko projektori nisu okomiti, već se nalaze pod nekim kutom, tada se radi o kosoj projekciji.
Primjer ortografske projekcije možemo vidjeti na slici \ref{fig:paralelna-projekcija} gdje preslikavamo pravokutnik u ravninu na visini označenoj s \textit{H}.

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/paralelna-projekcija}
    \caption{Primjer paralelne projekcije}
    \label{fig:paralelna-projekcija}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}
\newpage

Perspektivna projekcija je metoda projekcije koju većinom koristimo kod generiranja slika.
Ova projekcija uvodi dva nova pojma, a to su očište i gledište.
Očište je točka u kojoj se nalazi kamera, odnosno promatrač.
Gledište predstavlja smjer u kojem gleda promatrač.

Ova metoda projekcije proizvoljnu točku našeg promatranog objekta preslikava spajanjem točke s točkom gledišta.
Sjecište pravca koji povezuje očište i promatranu točku s ravninom projekcije predstavlja našu preslikanu točku.
Primjer ove projekcije možemo vidjeti na slici \ref{fig:perspektivna-projekcija}

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/perspektivna-projekcija}
    \caption{Primjer perspektivne projekcije}
    \label{fig:perspektivna-projekcija}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

Na slici \ref{fig:perspektivna-projekcija-preslikavanje} možemo vidjeti isti primjer preslikavanja kao i na slici \ref{fig:paralelna-projekcija} samo korištenjem perspektivne projekcije.
Vidimo kako u ovom slučaju, za razliku od prethodnog, \textit{x} i \textit{y} koordinate u našoj preslikanoj ravnini više neće imati jednake vrijednosti kao u početnoj ravnini.
Ovo se dešava zbog kuta između pravca koji spaja ravninu i očište.
Točka gledišta je u ovom primjeru ishodište koordinatnog sustava.

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/prespektivna-projekcija-preslikavanje}
    \caption{Primjer perspektivne projekcije}
    \label{fig:perspektivna-projekcija-preslikavanje}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

\subsection{Rasterski sustav}
Rasterski sustav služi za \textit{rasterizaciju} poligona i bridova našeg modela.
\textit{Rasterizacija} je postupak kojim našu geometrijsku reprezentaciju objekta pretvaramo u niz piksela u matričnom obliku koji su pogodni za prikaz na računalu.
Primjer rasteriziranog prikaza objekta možemo vidjeti na slici \ref{fig:rasterizirana-slika}
Ovdje možemo primjetiti jednu neželjenju pojavu, a to je nazubljenje rubova.
Zbog samog načina na koji objekt prikazan ovo je neizbježno, no problem je više izražen na manjim rezolucijama slike, dok je na većim rezolucijama jako teško primjetan.

Rasterski sustav je također zadužen za operacije poput prikaza osvjetljenja te sjenčanja koje su veoma bitne kako bi naš objekt imao što stvarniju reprezentaciju na slici.
Na kraju rasterski sustav zapisuje sliku u slikovnu prikaznu memoriju pomoću koje se onda prikazuje konačna slika na nekom prikaznog elementu.

\begin{figure}[H]
    \centering
    \includegraphics[width=10cm]{img/rasterizirana-slika}
    \caption{Rasterizirana slika}
    \label{fig:rasterizirana-slika}
\end{figure}
\footnotetext{Preuzeto sa \url{https://en.wikipedia.org/wiki/Rasterisation}}

\section{Model osvjetljenja}
Model osvjetljenja predstavlja izračun inteziteta svjetlosti u promatranoj točki uz dodatni postupak sjenčanja koji osjenčava površine objekta i prostora.
Ovaj postupak je veoma bitan kod generiranja slike našeg objekta jer doprinosi prikazu dubine prostora te omogućava realističniju reprezentaciju.
Interakcija svjetlosti u prirodi je veoma kompleksna pojava te se osnove svakog modela osvjetljenja temelje na otkrićima iz područja optike.
Tri su osnovna pristupa koja promatraju svojstva svjetlosti, a temelje se na geometrijskoj optici, fizikalnoj optici i kvantnoj optici.

Geometrijska optika predstavlja svjetlost kao skup svjetlosnih zraka.
Definira zakon pravocrtnog širenja svjetlosti, zakon odbijanja i zakon loma te je osnova u promatranju ponašanja svjetlosti.
Fizikalna optika definira svjetlost kao elektromagnetsko zračenje, odnosno predstavlja svjetlost kao širenje tranzsverzalnog vala.
Ovim pristupom objašnjavamo pojave kao što difrakcija i interferencija.
Kvantna optika definira svjetlost kao skup čestica, odnosno fotona.
Ovaj pristup definira frekvenciju i valnu duljinu svjetlosti te je veoma koristan kada promatramo sustav boja.

Svi modeli osvjetljenja temeljeni su na prethodno spomenutim pristupima.
Iako postoje veoma složeni modeli, najkorišteniji je i dalje Phongov model osvjetljenja koji smo i mi koristili u našem diplomskom radu.
U nastavku ćemo pobliže opisati ovaj model.

\subsection{Phongov model osvjetljenja}
Phongov model osvjetljenja prikazuje osvjetljenje našeg objekta kao linearnu kombinaciju triju komponenti:
\begin{itemize}
    \item ambijentna komponenta
    \item difuzna komponenta
    \item zrcalna komponenta
\end{itemize}
Model također pretpostavlja da su svi izvori svjetlosti na slici točkasti izvori.

Ambijentna komponenta predstavlja interackiju svjetlosti između objekata na našoj slici.
Služi kako dijelovi slike koji nisu pod izravnim utjecajem svjetlosti i dalje budu osvjetljeni.
U svojoj definiciji koristi konstantu $k_a$ ($0 \leq k_a \leq 1$) koja definira koliko će svjetlosti biti apsorbirano.
Definiciju možemo vidjeti u formuli (\ref{eq:ambijentna-komp}) gdje $I_a$ predstavlja jakost svjetlosti koja dolazi do točke koju promatramo.
\begin{equation}
    I_g = k_a \cdot I_a
    \label{eq:ambijentna-komp}
\end{equation}
Difuzna komponenta predstavlja intenzitet svijetlosti pri reflekciji od neke površine.
Primjer kako određujemo ovu komponentu možemo vidjeti na slici \ref{fig:difuzna-svjetlost}.
Jakost svjetlosti tada definiramo kao:
\begin{equation}
    I_d = I_i \cdot k_d \cdot cos(\theta)
    \label{eq:difuzna-komp}
\end{equation}
U formuli (\ref{eq:difuzna-komp}) $I_i$ predstavlja intezitet izvora svjetlosti, $k_d$ predstavlja koeficijent refleksije, a $\theta$ predstavlja kut između izvora svjetlosti i normale površine na kojoj se nalazi promatrana točka.

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/difuzna-svjetlost}
    \caption{Određivanje difuzne komponente}
    \label{fig:difuzna-svjetlost}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

Zrcalna komponenta svjetlosti, za razliku od difuzne, za izračun jakosti uzima u obzir položaj promatrača.
Primjer kako određujemo ovu komponentu možemo vidjeti na slici \ref{fig:zrcalna-svjetlost}, a njenu definiciju u formuli (\ref{eq:zrcalna-komp}).
\begin{equation}
    I_s = I_i \cdot k_s \cdot cos^n(\alpha)
    \label{eq:zrcalna-komp}
\end{equation}
$I_i$ predstavlja intezitet točkastog izvora, $k_s$ predstavlja koeficijent koji ovisi o materijalu površine, a $n$ predstavlja gruboću površine od koje se odbija svjetlost.
Kako različite veličine parametra $n$ utječu na intezitet zrcalne svjetlosti možemo vidjeti na slici \ref{fig:phong-n-param}.
\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/zrcalna-komponenta}
    \caption{Određivanje zrcalne komponente}
    \label{fig:zrcalna-svjetlost}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

\newpage
Konačno definiramo Phongov model osvjetljenja kao zbroj intenziteta iz ranije navedenih formula.
Ukupan intezitet svjetlosti tada iznosi:
\begin{equation}
    I = I_g \cdot I_d \cdot I_s
    \label{eq:phong-svjetlost}
\end{equation}

\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/phong-n-values}
    \caption{Utjecaj različitih vrijednost parametra $n$}
    \label{fig:phong-n-param}
\end{figure}
\footnotetext{Preuzeto sa \cite{book:irg}}

\chapter{Neuronske mreže i NeRF model}
Ukoliko nemamo 3D reprezentaciju našeg promatranog manipulatora, nego samo njegove 2D reprezentacije, tada za dobivanje 3D modela robota možemo iskoristiti NeRF model.
Stanje našeg manipulatora određeno je njegovom konfiguracijom zglobova te upravo tu činjenicu možemo iskoristiti kod učenja našeg modela.
Ovakav pristup iskoristio se u \cite{nerfSelfModelling} te su autori postigali veoma dobre rezultate kod opisivanja modela manipulatora.
U nastavku ćemo detaljnije objasniti na koji način rade neuronske mreže i NeRF modeli.

\section{Neuronske mreže}
Neuronska mreža je masivno paralelni distribuirani procesor koji je dobar za pamćenje iskustvenog znanja~\cite{defNeuronske}.
Ime je dobila zbog sličnosti rada ljudskom mozgu.
Sastoji se od puno manjih jedinica (neurona) koji znanje stječu kroz proces učenja.
Mreža je obično podijeljenja na 3 dijela, odnosno ulazni, skriveni i izlazni sloj.

Neki od najvažnijih svojstava neuronskih mreža su:
\begin{itemize}
    \item Nelinearnost
    \item Preslikavanja s ulaza na izlaz
    \item Adaptivnost
    \item Tolerancija na greške
    \item Analogija s neuronskim sustavom čovjeka
\end{itemize}
Primjer osnovnog modela neurona možemo vidjeti na slici \ref{fig:model-neurona}.
\begin{figure}[H]
    \centering
    \includegraphics[width=12cm]{img/model-neurona}
    \caption{Model neurona}
    \label{fig:model-neurona}
\end{figure}
\footnotetext{Preuzeto sa \cite{defNeuronske}}
Neuron se sastoji od određenog broja ulaza $x_1, x_2, ..., x_p$ koji se množe s odgovarajućim težinama $w_{k1}, w_{k2}, ..., w_{kp}$.
Ulaz $u_k$ računa se kao suma svih umnožaka.
Suma $u_k$ se tada predaje aktivacijskoj funkciji koja sadrži parametar $\theta_k$ te konačno dobivamo izlaz aktivacijske funkcije, odnosno izlaz neurona $y_k$.

Aktivacijske funkcije služe za postizanje ranije spomenutog svojstva nelinearnosti.
Neke od najčešće korištenih funkcija su funkcija zglobnice možemo vidjeti u formuli (\ref{eq:aktivacijske-funkcije}).
Najčešće za aktivacijsku funkciju koristimo funkciju zglobnice, označenu s $g_x$.
Druga najčešće korištena funkcija je sigmoida, označena s $\sigma(x)$.
\begin{equation}
    g(x) = max(0,x) \hspace{2cm} \sigma(x) = (1 + exp(-x))^{-1}
    \label{eq:aktivacijske-funkcije}
\end{equation}
Aktivacijske funkcije sadrže i prag $\sigma_k$ koji služi kako bismo, ovisno o problemu koji rješavamo, prilagodili izlaz funkcije.
Uzmemo li sigmoidu kao izabranu aktivacijsku funkciju, tada je naš izlaz ograničen na interval $[0,1]$, te nam tu pomaže prag kako bismo taj izlaz postavili na željeni interval.
Bitno svojstvo aktivacijske funkcije je njena derivabilnost, koja omogućuje propagaciju greške kroz sve slojeve naše neuronske mreže te tako omogućava učenje kroz iteracije.
\newpage
\noindent Proces učenja neuronske mreže sastoji se od sljedećih osnovnih koraka:
\begin{enumerate}
    \item prikupljanje i transformacija podataka
    \item definiranje arhitekture mreže, odnosno broja i vrste slojeva
    \item inicijalizacija težina
    \item unaprijedni prolaz
    \item izračun pogreške i unatražni prolaz (\textit{backpropagation})
    \item ažuriranje težina
\end{enumerate}
Ovaj postupak ponavljamo kroz velik broj iteracija te za cilj imamo generalizaciju nekog problema koji rješavamo.
Ne želimo da naša neuronska mreža daje dobre rezultate samo na već poznatim primjerima, nego i na novim primjerima koji još nisu korišteni.

Kod NeRF mreža cilj je upravo suprotan, tamo je cilj prenaučiti mrežu i dobiti 3D reprezentaciju točno onog objekta čije smo slike koristili tijekom učenja modela.
U nastavku ćemo objasniti ovaj neklasičan pristup neuronskim mrežama.
\section{NeRF model}
\textit{Neural radiance fields} (NeRF) je vrsta neuronske mreže koja općenito služi za parametrizaciju neke vrste signala.
Najčešće se koristi za generiranje 3D modela objekta, no može parametrizirati i bilo koji drugi signal kao što su vizualni ili slušni.
Kao model je predstavljen 2020. godine~\cite{mildenhall2020nerf}, a veliku je popularnost stekao 2022. godine kada se uvelike počeo koristiti u raznim znanstevnim istraživanjima.

Ovaj model je veoma jednostavne arhitekture.
Naravno, postoje njegove mnoge različite implementacije, no mi ćemo se fokusirati na arhitekturu prikazanu u originalnom članku\cite{mildenhall2020nerf}.
NeRF je zapravo obična neuronska mreža s aktivacijskim funkcijama zglobnice.
Ulaz u mrežu je 5D vektor koji se sastoji od 3D položaja $x = (x,y,z)$ i 2D očišta $(\theta, \phi)$.
Izlaz iz mreže je 3D vektor koji predstavlja boju $c = (r,g,b)$ i gustoću $\sigma$.
Arhitekturu mreže možemo vidjeti na slici \ref{fig:nerf-architecture}.
\begin{figure}[H]
    \centering
    \includegraphics[width=14cm]{img/nerf-architecture}
    \caption{Arhitetkura NeRF modela}
    \label{fig:nerf-architecture}
\end{figure}
\footnotetext{Preuzeto sa \cite{nerfExplained}}

Za razliku od drugih dubokih modela koji zahtjevaju velik broj slika, ovaj model zbog svoje prirode kreira kvalitetne 3D reprezentacije sa realtivno malim brojem primjera.
Ovo je slučaj jer svaka točka naše slike predstavlja pojedini ulaz u mrežu.

Na slici \ref{fig:nerf-rays} možemo vidjeti kako je zapravo ulaz u našu mrežu zraka koju generiramo iz svake točke slike.
Model za neku predanu zraku generira funkciju gustoće koja prikazuje postoji li naš objekt na određenoj točki u prostoru.
Ponovnim generiranjem slike iz dobivenih funkcija gustoće možemo izračunati gubitak u odnosu na originalnu sliku te tako ostvarujemo učenje modela.

\begin{figure}[H]
    \centering
    \includegraphics[height=5cm]{img/nerf-rays}
    \caption{Proces učenja NeRF modela}
    \label{fig:nerf-rays}
\end{figure}
\footnotetext{Preuzeto sa \cite{mildenhall2020nerf}}
\newpage
Ono zbog čega je ovaj model stekao tako veliku popularnost je njegova primjena kod spremanja 3D modela različitih objekata.
Umjesto prikazivanja objekta putem poligona te spremanja u obliku \textit{mesh} datoteka, objekt prikazujemo putem cjelokupne neuronske mreže, odnosno njenih težina.

Osim što je ovakav način zapisa puno kompaktniji također je i znatno brži.
Ovime otvaramo mogućnost prikazivanja scena objekata iz različitih kuteva u stvarnom vremenu što omogućava korištenje u raznim slučajevima, kao što je na primjer proširena stvarnost.
Autori jednog znanstvenog rada\cite{nerfSelfModelling} su čak otišli i korak dalje.
Za učenje 3D modela manipulatora koristeći NeRF nisu koristili slike iz različitih kuteva, nego su taj parametar zamijenili konfiguracijom robota.
Tada su za kompletan proces učenja potrebne samo slike s jedne stacionarne kamere te različite konfiguracije robota.
Ovaj pristup se pokazao veoma dobrim kod predikcije

\chapter{Korištene tehnologije i alati}
Napredak tehnologije i razvoj različitih paketa olakšali su nam rješavanje kompleksnih problema kao što su nastajanje slike te analitička inverzna kinematika.
U nastavku ćemo opisati tehnologije koje smo koristili.
Programsku implementaciju izradili smo pomoću programskog jezika Python upravo zbog njegove široke primjene te raznih biblioteka koje nudi.
Biblioteku PyTorch3D koristili smo kod generiranja slika
Opisat ćemo programski jezik Python te njegove pakete koji su nam pomogli prilikom generiranja 2D reprezentacije našeg robota.

%--- ZAKLJUČAK / CONCLUSION ----------------------------------------------------
\chapter{Zaključak}
\label{pog:zakljucak}



%--- LITERATURA / REFERENCES ---------------------------------------------------

% Literatura se automatski generira iz zadane .bib datoteke / References are automatically generated from the supplied .bib file
% Upiši ime BibTeX datoteke bez .bib nastavka / Enter the name of the BibTeX file without .bib extension
\bibliography{literatura}



%--- SAŽETAK / ABSTRACT --------------------------------------------------------

% Sažetak na hrvatskom
\begin{sazetak}
  Unesite sažetak na hrvatskom.

  \blindtext
\end{sazetak}

\begin{kljucnerijeci}
  prva ključna riječ; druga ključna riječ; treća ključna riječ
\end{kljucnerijeci}


% Abstract in English
\begin{abstract}
  Enter the abstract in English.
  
\end{abstract}

\begin{keywords}
  the first keyword; the second keyword; the third keyword
\end{keywords}


%--- PRIVITCI / APPENDIX -------------------------------------------------------

% Sva poglavlja koja slijede će biti označena slovom i riječi privitak / All following chapters will be denoted with an appendix and a letter
\backmatter


\end{document}
